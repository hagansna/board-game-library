{
	"project": "Board Game Library",
	"version": "1.0.0-MVP",
	"techStack": {
		"framework": "SvelteKit",
		"aiService": "Google Gemini Flash Preview",
		"database": "TBD (SQLite/PostgreSQL)",
		"uiComponents": "shadcn-svelte",
		"design": "Dark mode support"
	},
	"stories": [
		{
			"id": 1,
			"category": "authentication",
			"description": "User can create an account with email and password",
			"acceptanceCriteria": [
				"Email validation prevents invalid formats",
				"Password must meet minimum security requirements (8+ characters)",
				"Duplicate email addresses are rejected with clear error message",
				"Successful registration creates user record in database",
				"User is automatically logged in after registration OR redirected to login"
			],
			"steps": [
				"Navigate to /auth/register page",
				"Enter valid email address (e.g., user@example.com)",
				"Enter password meeting requirements (8+ characters)",
				"Click 'Register' or 'Sign Up' button",
				"Verify account is created in database (check users table)",
				"Verify user is redirected to library page or login page",
				"Attempt duplicate registration - verify error message displays"
			],
			"passes": true
		},
		{
			"id": 2,
			"category": "authentication",
			"description": "User can log in to access their library",
			"acceptanceCriteria": [
				"Valid credentials grant access to library",
				"Invalid credentials show clear error message",
				"Session is created upon successful login",
				"User is redirected to library page after login",
				"Login state persists (see story #4)"
			],
			"steps": [
				"Navigate to /auth/login page",
				"Enter registered email and password",
				"Click 'Login' or 'Sign In' button",
				"Verify session cookie or token is created",
				"Verify redirect to /games or / (library page)",
				"Attempt login with invalid credentials - verify error message",
				"Verify protected routes are now accessible"
			],
			"passes": true
		},
		{
			"id": 3,
			"category": "authentication",
			"description": "User can log out of their account",
			"acceptanceCriteria": [
				"Logout button is accessible from all authenticated pages",
				"Session is completely destroyed on logout",
				"User is redirected to public page (login or home)",
				"Protected routes become inaccessible after logout"
			],
			"steps": [
				"Log in to account",
				"Locate and click 'Logout' button in navigation/header",
				"Verify session cookie or token is cleared",
				"Verify redirect to /auth/login or public home page",
				"Attempt to access /games or other protected route",
				"Verify redirect to login page (protected route inaccessible)"
			],
			"passes": true
		},
		{
			"id": 4,
			"category": "authentication",
			"description": "User stays logged in across page refreshes and browser sessions",
			"acceptanceCriteria": [
				"Session persists through page refresh",
				"Session persists through browser close/reopen (for reasonable duration)",
				"User does not need to re-login on every visit",
				"Session expires after defined period (e.g., 7 days, 30 days)"
			],
			"steps": [
				"Log in successfully",
				"Navigate to library page",
				"Refresh the page (F5 or browser refresh)",
				"Verify user remains authenticated (library still accessible)",
				"Close browser completely",
				"Reopen browser and navigate to application",
				"Verify user is still logged in (no re-login required)",
				"Verify session eventually expires after defined duration"
			],
			"passes": true
		},
		{
			"id": 5,
			"category": "library-management",
			"description": "User can view all board games in their library",
			"acceptanceCriteria": [
				"Library page displays all games belonging to logged-in user",
				"Each game shows key information (title, year, players, play time)",
				"Empty state displays helpful message when no games exist",
				"Games are sorted in consistent order (e.g., alphabetical, date added)",
				"Only the logged-in user's games are visible (data isolation)"
			],
			"steps": [
				"Log in to account with existing games",
				"Navigate to library page (/games or /)",
				"Verify all user's games are displayed as cards or list items",
				"Check each game shows: title, year, player count, play time",
				"Log out and log in as different user",
				"Verify only that user's games are displayed",
				"Log in as new user with no games",
				"Verify empty state message displays (e.g., 'No games yet. Add your first game!')"
			],
			"passes": true
		},
		{
			"id": 6,
			"category": "library-management",
			"description": "User can manually add a board game with complete details",
			"acceptanceCriteria": [
				"Form includes fields for: title (required), year, player count, play time",
				"Title is required; other fields optional",
				"Form validation prevents submission without required fields",
				"Successfully added game appears immediately in library",
				"Game is persisted in database with correct user association"
			],
			"steps": [
				"Navigate to library page",
				"Click 'Add Game' or '+ New Game' button",
				"Verify form displays with fields: title, year, player count, play time",
				"Enter game details (e.g., 'Catan', 1995, '3-4', '60-90 min')",
				"Submit the form",
				"Verify redirect to library page",
				"Verify new game appears in library with entered details",
				"Refresh page - verify game persists",
				"Check database - verify game record with correct user_id"
			],
			"passes": true
		},
		{
			"id": 7,
			"category": "library-management",
			"description": "User can edit details of games in their library",
			"acceptanceCriteria": [
				"Edit button/action available on each game card",
				"Edit form pre-populates with existing game data",
				"User can modify any field (title, year, players, play time)",
				"Changes are saved to database",
				"Updated information displays immediately in library"
			],
			"steps": [
				"Navigate to library page with existing games",
				"Click 'Edit' button on a specific game card",
				"Verify form displays with current game data pre-filled",
				"Modify one or more fields (e.g., change year from 1995 to 1996)",
				"Click 'Save' or 'Update' button",
				"Verify redirect to library page",
				"Verify updated information displays in library",
				"Refresh page - verify changes persist",
				"Check database - verify updated fields"
			],
			"passes": true
		},
		{
			"id": 8,
			"category": "library-management",
			"description": "User can remove games from their library",
			"acceptanceCriteria": [
				"Delete button/action available on each game card",
				"Optional: Confirmation prompt prevents accidental deletion",
				"Game is removed from library view immediately",
				"Game is deleted from database (or soft-deleted)",
				"Deletion only affects the specific game selected"
			],
			"steps": [
				"Navigate to library page with multiple games",
				"Click 'Delete' or trash icon on a specific game card",
				"If confirmation prompt exists, confirm deletion",
				"Verify game disappears from library view immediately",
				"Verify other games remain unaffected",
				"Refresh page - verify deleted game does not reappear",
				"Check database - verify game record is removed or marked deleted"
			],
			"passes": true
		},
		{
			"id": 9,
			"category": "ai-recognition",
			"description": "User can upload a photo of a board game box for AI analysis",
			"acceptanceCriteria": [
				"Upload interface supports click-to-upload and drag-and-drop",
				"Accepts common image formats (JPG, PNG, HEIC)",
				"File size limit enforced (e.g., 10MB max)",
				"Image preview displays after selection",
				"Clear indication that image is ready for analysis"
			],
			"steps": [
				"Navigate to upload page (/upload or upload modal)",
				"Click 'Upload Image' button or drag-drop area",
				"Select an image file of board game box from file system",
				"Verify image preview displays with filename",
				"Verify upload button state changes to ready/enabled",
				"Test with invalid file type (e.g., .txt) - verify error message",
				"Test with oversized file - verify size limit error"
			],
			"passes": true
		},
		{
			"id": 10,
			"category": "ai-recognition",
			"description": "System uses Gemini AI to extract game information from uploaded image",
			"acceptanceCriteria": [
				"Image is sent to Gemini Flash Preview API for analysis",
				"AI extracts: title, publisher, year published, player count, play time",
				"Loading state displays during AI processing",
				"Extracted data is structured and parseable",
				"API errors are handled gracefully"
			],
			"steps": [
				"Upload a clear board game box image (e.g., Catan, Ticket to Ride)",
				"Click 'Analyze' or trigger automatic analysis",
				"Verify loading spinner or progress indicator displays",
				"Monitor network tab - verify API call to Gemini with image",
				"Verify response contains structured data: title, publisher, year, players, play time",
				"Check console - no API errors logged",
				"Test with obscure game - verify AI still attempts extraction",
				"Test with non-game image - verify graceful handling"
			],
			"passes": true
		},
		{
			"id": 11,
			"category": "ai-recognition",
			"description": "User can review and confirm AI-extracted information before adding to library",
			"acceptanceCriteria": [
				"Extracted information displays in editable form",
				"User can modify any AI-extracted field before saving",
				"Clear 'Add to Library' or 'Confirm' action button",
				"Game is added to library only after user confirmation",
				"User can cancel and return to upload without adding"
			],
			"steps": [
				"Complete AI analysis of board game image",
				"Verify extracted data displays in review form",
				"Verify all fields are editable (title, publisher, year, players, play time)",
				"Make a correction to one field (e.g., fix misspelled title)",
				"Click 'Add to Library' button",
				"Verify redirect to library page",
				"Verify game appears in library with corrected information",
				"Test cancel action - verify game is not added to library"
			],
			"passes": true
		},
		{
			"id": 12,
			"category": "ai-recognition",
			"description": "User can manually enter game details if AI recognition fails or has low confidence",
			"acceptanceCriteria": [
				"System detects AI failure or low confidence results",
				"Clear message explains why auto-recognition failed",
				"'Enter Manually' option is prominent and accessible",
				"Manual entry form matches standard add game form",
				"Uploaded image can optionally be retained or discarded"
			],
			"steps": [
				"Upload an image that AI cannot recognize (blurry, partial, non-game)",
				"Trigger AI analysis",
				"Verify error or low-confidence message displays",
				"Locate and click 'Enter Manually' or 'Add Manually' button",
				"Verify manual entry form displays",
				"Fill in game details manually",
				"Submit form",
				"Verify game is added to library successfully",
				"Verify uploaded image handling (saved, discarded, or optional)"
			],
			"passes": true
		},
		{
			"id": 13,
			"category": "ux-design",
			"description": "Application uses shadcn-svelte components for consistent UI/UX",
			"acceptanceCriteria": [
				"shadcn-svelte is properly installed and configured",
				"All UI components use shadcn components (buttons, forms, cards, dialogs)",
				"Components follow shadcn styling conventions",
				"Consistent design system across all pages",
				"Components are accessible (keyboard navigation, ARIA labels)"
			],
			"steps": [
				"Install shadcn-svelte via CLI (npx shadcn-svelte@latest init)",
				"Verify components.json config file is created",
				"Add required components (button, card, input, form, dialog, etc.)",
				"Verify src/lib/components/ui/ directory contains shadcn components",
				"Review all pages - verify buttons use shadcn Button component",
				"Review forms - verify inputs use shadcn Input/Form components",
				"Review game cards - verify Card component usage",
				"Test keyboard navigation on all interactive elements",
				"Run accessibility audit (axe or similar tool)"
			],
			"passes": true
		},
		{
			"id": 14,
			"category": "ux-design",
			"description": "Users can toggle between light and dark mode with preference persistence",
			"acceptanceCriteria": [
				"Dark mode toggle is accessible from all pages",
				"Theme preference persists across sessions (localStorage)",
				"System respects user's OS theme preference on first visit",
				"All components properly support both light and dark themes",
				"No FOUC (Flash of Unstyled Content) on page load"
			],
			"steps": [
				"Locate dark mode toggle button in header/navigation",
				"Verify current theme is visually indicated on toggle",
				"Click toggle - verify smooth transition to dark mode",
				"Verify all pages update (auth, library, upload, forms)",
				"Check all colors have sufficient contrast in both modes",
				"Refresh page - verify dark mode persists",
				"Clear localStorage - verify app respects OS preference (prefers-color-scheme)",
				"Toggle back to light mode - verify persistence",
				"Close and reopen browser - verify theme preference retained",
				"Test with OS in dark mode - verify app defaults to dark on first visit"
			],
			"passes": true
		},
		{
			"id": 15,
			"category": "library-management",
			"description": "User can add box art to a game via image URL or file upload",
			"acceptanceCriteria": [
				"Add/Edit game form includes optional box art field",
				"User can provide an image URL for box art",
				"User can upload an image file for box art (JPG, PNG, WebP)",
				"Image preview displays after URL entry or file selection",
				"Uploaded images are stored and accessible",
				"URL validation ensures valid image URLs",
				"File size limit enforced for uploads (e.g., 5MB max)",
				"Box art can be removed or replaced when editing"
			],
			"steps": [
				"Navigate to Add Game form",
				"Locate box art field (should show URL input and upload option)",
				"Enter a valid image URL - verify preview displays",
				"Clear URL and use file upload instead - verify preview displays",
				"Submit form with box art - verify game is created",
				"Navigate to Edit Game form - verify existing box art is shown",
				"Replace box art with different image - verify update works",
				"Remove box art entirely - verify game saves without image",
				"Test with invalid URL - verify error message",
				"Test with oversized file - verify size limit error"
			],
			"passes": true
		},
		{
			"id": 16,
			"category": "library-management",
			"description": "Box art is displayed on game cards in the library",
			"acceptanceCriteria": [
				"Game cards display box art image when available",
				"Placeholder or icon shown when no box art exists",
				"Images are properly sized and don't distort",
				"Images load efficiently (lazy loading, appropriate sizing)",
				"Alt text is provided for accessibility",
				"Broken image URLs are handled gracefully"
			],
			"steps": [
				"Add a game with box art image",
				"Navigate to library page",
				"Verify game card displays the box art image",
				"Verify image is properly sized within card",
				"Add a game without box art",
				"Verify placeholder or default state displays appropriately",
				"Test with broken image URL - verify graceful fallback",
				"Inspect network tab - verify images use appropriate sizing",
				"Check accessibility - verify alt text on images"
			],
			"passes": true
		},
		{
			"id": 17,
			"category": "ai-recognition",
			"description": "User can select and upload multiple images at once for batch AI analysis",
			"acceptanceCriteria": [
				"File picker supports selecting multiple images at once",
				"Thumbnails displayed for all selected images before processing",
				"Progress indicator shows status for each image during analysis",
				"Failed images don't block processing of other images",
				"Results from all images aggregated for review",
				"User can remove images from selection before processing",
				"Clear summary shows total games found across all images"
			],
			"steps": [
				"Navigate to upload page",
				"Click upload button to open file picker",
				"Select multiple image files (3-5 images) using Ctrl/Cmd+click or Shift+click",
				"Verify all selected images appear as thumbnails in upload area",
				"Remove one image from selection - verify it's removed without affecting others",
				"Click 'Analyze All' or similar batch action button",
				"Verify progress indicator shows processing status for each image",
				"Verify results from all images are collected and displayed",
				"Test with one corrupted/invalid file in batch - verify other files still process",
				"Verify summary shows 'Found X games across Y images'"
			],
			"passes": true
		},
		{
			"id": 18,
			"category": "ai-recognition",
			"description": "AI detects and extracts information for multiple board games from a single image",
			"acceptanceCriteria": [
				"AI identifies when an image contains multiple game boxes",
				"Each detected game is returned as a separate entry with its own data",
				"Count of games detected is shown to user (e.g., 'Found 3 games')",
				"Low-confidence detections are flagged appropriately",
				"Works with shelf photos, collection photos, and stacked boxes",
				"Gracefully handles partially visible or obscured games"
			],
			"steps": [
				"Upload image containing 2-3 visible board game boxes (e.g., shelf photo)",
				"Trigger AI analysis",
				"Verify AI response indicates multiple games detected",
				"Verify count displayed (e.g., 'Found 3 games in this image')",
				"Verify each detected game has separate extracted data",
				"Test with image containing only 1 game - verify single game extracted normally",
				"Test with crowded shelf image - verify AI handles partial/unclear games",
				"Verify low-confidence games are marked as such"
			],
			"passes": true
		},
		{
			"id": 19,
			"category": "ai-recognition",
			"description": "User can select which games to add when multiple games are detected from images",
			"acceptanceCriteria": [
				"Checkbox list displays all detected games from all processed images",
				"Each game entry shows extracted info (title, year, players, play time)",
				"User can select/deselect individual games via checkboxes",
				"'Select All' and 'Deselect All' options available",
				"'Add Selected' button adds only checked games to library",
				"Each game can be edited individually before adding",
				"Visual grouping shows which games came from the same image"
			],
			"steps": [
				"Upload image(s) that result in multiple detected games",
				"Verify checkbox list displays all detected games",
				"Verify each game shows title, year, player count, play time",
				"Select only 2 of 4 detected games using checkboxes",
				"Click 'Add Selected' button",
				"Verify only the 2 selected games are added to library",
				"Verify unselected games are not added",
				"Test 'Select All' - verify all checkboxes become checked",
				"Test 'Deselect All' - verify all checkboxes become unchecked",
				"Edit one game's title before adding - verify edit is preserved"
			],
			"passes": true
		},
		{
			"id": 20,
			"category": "ai-recognition",
			"description": "AI uses board game knowledge to enrich extracted data beyond visible box information",
			"acceptanceCriteria": [
				"AI provides brief game description/summary based on its knowledge",
				"AI includes game categories/tags (strategy, party, cooperative, family, etc.)",
				"AI provides BoardGameGeek rating if the game is known",
				"AI provides BoardGameGeek rank if the game is known",
				"AI indicates which information came from image vs. knowledge base",
				"Graceful handling when AI doesn't recognize the game (knowledge fields null)"
			],
			"steps": [
				"Upload image of well-known game (e.g., Catan, Ticket to Ride)",
				"Trigger AI analysis",
				"Verify response includes description field with game summary",
				"Verify response includes categories array (e.g., ['strategy', 'trading'])",
				"Verify response includes bggRating (e.g., 7.2)",
				"Verify response includes bggRank (e.g., 150)",
				"Upload image of obscure/unknown game",
				"Verify AI still extracts visible info but knowledge fields may be null",
				"Verify UI clearly shows which data is AI-enriched vs. from image"
			],
			"passes": true
		},
		{
			"id": 21,
			"category": "library-management",
			"description": "Game data model stores additional AI-provided fields for enriched game information",
			"acceptanceCriteria": [
				"Game model includes optional 'description' field (text)",
				"Game model includes optional 'categories' field (JSON array of strings)",
				"Game model includes optional 'bggRating' field (decimal/float)",
				"Game model includes optional 'bggRank' field (integer)",
				"Existing games are unaffected (new fields are nullable)",
				"New fields are displayed on game cards and detail views",
				"Manual game entry form allows editing these fields"
			],
			"steps": [
				"Run database migration to add new fields",
				"Verify existing games still load correctly",
				"Add a new game via AI - verify all new fields are populated",
				"View game in library - verify description displays",
				"View game in library - verify categories display as tags",
				"View game in library - verify BGG rating and rank display",
				"Edit existing game - verify new fields can be modified",
				"Add game manually - verify new fields are available in form"
			],
			"passes": true
		},
		{
			"id": 22,
			"category": "library-management",
			"description": "User can search games in their library by title",
			"acceptanceCriteria": [
				"Search input field visible in library page header",
				"Search filters games in real-time as user types",
				"Search is case-insensitive",
				"Partial matches are included in results",
				"Clear button (X) resets search and shows all games",
				"'No results found' message displays when search has no matches",
				"Search works in combination with sort and filter"
			],
			"steps": [
				"Navigate to library page with multiple games",
				"Locate search input in header area",
				"Type partial game name (e.g., 'cat' for 'Catan')",
				"Verify matching games appear, non-matching games hidden",
				"Verify search is case-insensitive ('CAT' matches 'Catan')",
				"Click clear/X button - verify all games reappear",
				"Search for non-existent game - verify 'No results' message",
				"Apply a filter, then search - verify both work together"
			],
			"passes": true
		},
		{
			"id": 23,
			"category": "library-management",
			"description": "User can sort their game library by various criteria",
			"acceptanceCriteria": [
				"Sort control (dropdown or buttons) visible in library header",
				"Sort options include: Title A-Z, Title Z-A, Year (newest first), Year (oldest first), Recently added, Player count, Play time",
				"Current sort option is visually indicated",
				"Sort updates library view immediately",
				"Sort preference persists during browser session",
				"Sort works in combination with search and filter"
			],
			"steps": [
				"Navigate to library page with multiple games",
				"Locate sort dropdown/buttons in header",
				"Select 'Title A-Z' - verify games sorted alphabetically",
				"Select 'Title Z-A' - verify games sorted reverse alphabetically",
				"Select 'Year (newest)' - verify newest games appear first",
				"Select 'Recently added' - verify most recent additions first",
				"Verify current sort option is visually highlighted",
				"Navigate away and return - verify sort preference retained",
				"Apply search filter - verify sort still applies to results"
			],
			"passes": true
		},
		{
			"id": 24,
			"category": "library-management",
			"description": "User can filter games by player count, play time, and year ranges",
			"acceptanceCriteria": [
				"Filter controls visible in library (dropdowns, buttons, or filter panel)",
				"Player count filter options: 1 player, 2 players, 3-4 players, 5+ players, any",
				"Play time filter options: Under 30 min, 30-60 min, 1-2 hours, 2+ hours, any",
				"Year filter allows selecting a range or specific decades",
				"Multiple filters can be applied simultaneously",
				"Active filters clearly indicated (badges, chips, or highlighted)",
				"'Clear all filters' option available",
				"Filter count badge shows number of active filters",
				"Filters work in combination with search and sort"
			],
			"steps": [
				"Navigate to library page with games of varying player counts and play times",
				"Apply player count filter '2 players' - verify only 2-player games shown",
				"Apply play time filter '30-60 min' - verify combined filter works",
				"Verify active filter indicators show both filters",
				"Verify filter count badge shows '2'",
				"Click 'Clear all filters' - verify all games reappear",
				"Apply year filter for specific range - verify games filtered",
				"Combine filter with search - verify both work together",
				"Combine filter with sort - verify all three work together"
			],
			"passes": true
		},
		{
			"id": 25,
			"category": "library-management",
			"description": "Game data model includes suggested age field",
			"acceptanceCriteria": [
				"Database has 'suggested_age' column (nullable integer)",
				"DbGame interface includes suggested_age: number | null",
				"Game interface includes suggestedAge: number | null",
				"GameInput interface includes suggestedAge?: number | null",
				"Transform functions map between snake_case and camelCase",
				"Existing games unaffected (field is nullable)"
			],
			"steps": [
				"Add suggested_age column to games table in Supabase",
				"Update DbGame interface in src/lib/server/games.ts",
				"Update Game interface in src/lib/server/games.ts",
				"Update GameInput interface in src/lib/server/games.ts",
				"Update transformGame() to map suggested_age to suggestedAge",
				"Update transformInput() to map suggestedAge to suggested_age",
				"Verify existing games still load correctly"
			],
			"passes": true
		},
		{
			"id": 26,
			"category": "ai-recognition",
			"description": "AI extracts suggested minimum age when analyzing board game images",
			"acceptanceCriteria": [
				"ExtractedGameData interface includes suggestedAge: number | null",
				"AI prompt instructs extraction of minimum recommended age",
				"AI uses board game knowledge to determine age if not visible on box",
				"Suggested age is included in extraction results for known games",
				"Graceful handling when age cannot be determined (returns null)"
			],
			"steps": [
				"Update ExtractedGameData interface in src/lib/server/gemini.ts",
				"Update EXTRACTION_PROMPT to include suggested age extraction",
				"Update parseSingleGame() to handle suggestedAge field",
				"Test with well-known game image (e.g., Catan) - verify age extracted",
				"Test with obscure game - verify null returned gracefully",
				"Verify suggestedAge flows through to game creation"
			],
			"passes": true
		},
		{
			"id": 27,
			"category": "library-management",
			"description": "User can manually enter or edit suggested age when adding or editing games",
			"acceptanceCriteria": [
				"Add game form includes optional suggested age input field",
				"Edit game form includes suggested age field pre-populated with existing value",
				"Field accepts positive integers (validation: 1-21 range typical)",
				"Invalid values show clear error message",
				"Field is optional - games can be saved without suggested age"
			],
			"steps": [
				"Add suggestedAge input to src/routes/games/add/+page.svelte",
				"Add server-side validation in src/routes/games/add/+page.server.ts",
				"Add suggestedAge input to src/routes/games/[id]/edit/+page.svelte",
				"Add server-side validation in src/routes/games/[id]/edit/+page.server.ts",
				"Test adding game with suggested age - verify saved correctly",
				"Test editing game to add/change suggested age - verify updated",
				"Test with invalid value (negative, non-integer) - verify error shown"
			],
			"passes": true
		},
		{
			"id": 28,
			"category": "library-management",
			"description": "Suggested age is displayed on game cards in the library view",
			"acceptanceCriteria": [
				"GameCard component accepts suggestedAge prop",
				"Age displays in user-friendly format (e.g., 'Ages 8+')",
				"Age only displays when value exists (conditional rendering)",
				"Display is consistent with other game metadata styling",
				"Appropriate icon used (e.g., user or calendar icon)"
			],
			"steps": [
				"Add suggestedAge to GameCard Props interface",
				"Add suggestedAge to component destructuring",
				"Add conditional rendering for age display",
				"Pass suggestedAge prop from library page to GameCard",
				"Test game with suggested age - verify displays correctly",
				"Test game without suggested age - verify no empty display"
			],
			"passes": true
		},
		{
			"id": 29,
			"category": "ai-recognition",
			"description": "Script backfills suggested age for existing games using AI lookup",
			"acceptanceCriteria": [
				"Script queries all games where suggested_age is null",
				"For each game, sends title to Gemini to look up recommended age",
				"Updates database record with AI-determined age",
				"Includes rate limiting to avoid API throttling",
				"Handles errors gracefully (logs failures, continues processing)",
				"Provides progress output during execution",
				"Can be run multiple times safely (only updates null values)"
			],
			"steps": [
				"Create backfill script in src/lib/server/ or scripts/ directory",
				"Query games table for records with null suggested_age",
				"Create Gemini prompt for age lookup by game title",
				"Implement rate limiting (e.g., 1 request per second)",
				"Update each game record with returned age",
				"Log progress and any errors",
				"Run script and verify existing games are updated",
				"Run script again - verify already-populated games are skipped"
			],
			"passes": false
		},
		{
			"id": 30,
			"category": "library-management",
			"description": "Game data model includes play count, personal review, and personal rating fields",
			"acceptanceCriteria": [
				"Database has 'play_count' column (nullable integer, default 0)",
				"Database has 'review' column (nullable text)",
				"Database has 'personal_rating' column (nullable integer 1-5)",
				"DbGame interface includes play_count, review, personal_rating fields",
				"Game interface includes playCount, review, personalRating fields",
				"GameInput interface includes optional playCount, review, personalRating fields",
				"Transform functions map between snake_case and camelCase",
				"Existing games unaffected (new fields are nullable)"
			],
			"steps": [
				"Add play_count, review, personal_rating columns to games table in Supabase",
				"Update DbGame interface in src/lib/server/games.ts",
				"Update Game interface in src/lib/server/games.ts",
				"Update GameInput interface in src/lib/server/games.ts",
				"Update transformGame() to map new fields",
				"Update transformInput() to map new fields",
				"Verify existing games still load correctly"
			],
			"passes": false
		},
		{
			"id": 31,
			"category": "library-management",
			"description": "User can enter play count, personal review, and star rating when adding or editing games",
			"acceptanceCriteria": [
				"Add/edit forms include play count number input",
				"Add/edit forms include personal review textarea",
				"Add/edit forms include visual star rating selector (1-5 stars)",
				"Star rating is clickable - user clicks star to set rating",
				"Play count validation: non-negative integer",
				"Personal rating validation: integer 1-5 only",
				"All fields are optional - games can be saved without them",
				"Edit form pre-populates with existing values"
			],
			"steps": [
				"Create reusable StarRating component in src/lib/components/",
				"Add play count input to add game form",
				"Add review textarea to add game form",
				"Add StarRating component to add game form",
				"Add server-side validation in add page server action",
				"Repeat for edit game form with pre-population",
				"Test adding game with all new fields",
				"Test editing game to update fields",
				"Test star rating click interaction"
			],
			"passes": false
		},
		{
			"id": 32,
			"category": "ux-design",
			"description": "Clicking a game card opens an expanded modal view with full game details",
			"acceptanceCriteria": [
				"Clicking anywhere on game card (except Edit/Delete buttons) opens modal",
				"Modal displays larger box art image",
				"Modal shows full description without truncation",
				"Modal displays all game metadata (players, time, year, categories)",
				"Modal shows BGG rating and rank if available",
				"Modal shows personal rating, play count, and review if available",
				"Close button (X) dismisses modal",
				"Clicking outside modal dismisses it",
				"Edit button in modal navigates to edit page"
			],
			"steps": [
				"Add Dialog.Root wrapper to GameCard component",
				"Create expanded view layout inside Dialog.Content",
				"Display full description in scrollable area",
				"Show all game fields with appropriate formatting",
				"Add close button in modal header",
				"Prevent card click from triggering when clicking Edit/Delete",
				"Test modal opens on card click",
				"Test modal closes via X button and outside click",
				"Test Edit button in modal works correctly"
			],
			"passes": false
		},
		{
			"id": 33,
			"category": "library-management",
			"description": "User can quickly update play count directly from the expanded game modal",
			"acceptanceCriteria": [
				"Expanded modal shows play count with +/- buttons",
				"Clicking + increments play count by 1",
				"Clicking - decrements play count by 1 (minimum 0)",
				"Update persists to database immediately",
				"Visual feedback shows update in progress",
				"Play count updates without closing modal",
				"Updated count reflects in library view when modal closes"
			],
			"steps": [
				"Add play count display with +/- buttons to expanded modal",
				"Create server action for quick play count update",
				"Implement increment button with form action",
				"Implement decrement button with form action (min 0)",
				"Add loading state during update",
				"Test incrementing play count multiple times",
				"Test decrementing play count (verify doesn't go below 0)",
				"Verify library view shows updated count after modal close"
			],
			"passes": false
		}
	]
}
